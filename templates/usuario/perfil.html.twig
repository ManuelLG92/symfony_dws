{% extends 'base.html.twig' %}

{% block title %}Mi perfil{% endblock %}

{% block body %}

    <div class="container contenedor rounded">
        <h2 class="mt-3">Detalles de tu cuenta</h2>
        <hr>
        <h3>Datos personales</h3>
        <p>Hola {{ usuario.nombre|capitalize }} {{ usuario.apellido|capitalize }}!</p>
        <p>Email: {{ usuario.email }}</p>
        <p>Ubicacion: {{ direccion.ciudad|capitalize }} {{ direccion.cp|upper }},
            {{ direccion.estado|capitalize }}, {{ direccion.pais|capitalize }} </p>
        <input type="hidden" name="idUsuario" value="{{ usuario.id }}">
        <hr>
        <h3 class="mt-3">Tus articulos</h3>
        <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Id Articulo</th>
            <th scope="col">Nombre</th>
            <th scope="col">Stock</th>
            <th scope="col">Precio</th>
            <th scope="col" class="text-center">Opciones</th>

        </tr>
        </thead>
        <tbody>
        {% for index, articulo in articulos %}
            <tr>
                <th scope="row">{{ index+1 }}</th>
                <td>{{ articulo.id }}</td>
                <td>{{ articulo.nombre }}</td>
                <td>{{ articulo.stock }}</td>
                <td>{{ articulo.precio }}</td>
                <td>
                    <div class="text-center">
                    <a href="{{ path('editar_articulo_get', {'id': articulo.id}) }}">
                        <img src="{{ asset('imagenes_aplicacion/edit.png') }}" alt="Editar" title="Editar">
                    </a>
                    </div>
                    {#  <a href="{{ path('articulo_edit', {'id': articulo.id}) }}">edit</a>
                #}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6">Aun no has creado ningun articulo, crea uno pinchando
                    <a href="{{ path('articulo_new') }}"> ¡aqui!</a></td>
            </tr>
        {% endfor %}
        </tbody>
            </table>
        <h5 class="text-center">Puedes agregar un nuevo producto pinchando <a href="{{ path('articulo_new') }}">¡aqui!</a> </h5>
        <hr>
        <h3>Tus ventas:</h3>
        {% if vendedor.getNumeroVentas() == 0 %}
        <p>Aun no tienes ninguna venta.</p>
        {% else %}
            <p>Has vendido {{ vendedor.getNumeroVentas() }} articulos.</p>
            <p>Has vendido </p>
        {% endif %}
        {{ dump(vendedor.getNumeroVentas()) }}
        <hr>
        <h3>Tus compras:</h3>
        <div class="text-center">
            <table class="table">
        <thead>
            <tr>
                <th scope="col"># </th>
                <th scope="col">Importe</th>
                <th scope="col">Fecha</th>
            </tr>
        </thead>
        <tbody>
        {% if facturas is null %}
            <td colspan="3">Aun no has realizado ninguna compra.</td>

        {% else %}
            {% for factura in facturas %}
                <tr>
                    <th scope="row" >
                        <a href="{{ path('factura', {'id': factura.id }) }}"
                           class="text-decoration-none text-dark" target="_blank">
                            {{ factura.id }}
                        </a>
                    </th>
                    <td>{{ factura.importe }} BC</td>
                    <td>{{ factura.fecha|date("m/d/Y") }}</td>
                </tr>
            <p></p>
            {% endfor %}

        {% endif %}
        </tbody>
        </table>
        </div>


        <hr>
        <h3>Tu banco: </h3>
        <h5>Numero de cuenta: {{ usuario.banco.getCuentaVirtual() }}</h5>
        <h5>Balance: {{ usuario.banco.getBalance() }}</h5>


    </div>

{% endblock %}